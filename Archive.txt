var data;
      fetch("https://sar10686.corebridge.net/SalesModule/Orders/OrderProduct.asmx/GetOrderProductQueueEntriesPaged", {
            "headers": {
                  "accept": "application/json, text/javascript, */*; q=0.01",
                  "accept-language": "en-US,en;q=0.9",
                  "content-type": "application/json; charset=UTF-8",
                  "priority": "u=1, i",
                  "sec-ch-ua": "\"Chromium\";v=\"130\", \"Google Chrome\";v=\"130\", \"Not?A_Brand\";v=\"99\"",
                  "sec-ch-ua-mobile": "?0",
                  "sec-ch-ua-platform": "\"Windows\"",
                  "sec-fetch-dest": "empty",
                  "sec-fetch-mode": "cors",
                  "sec-fetch-site": "same-origin",
                  "x-requested-with": "XMLHttpRequest",
                  "cookie": "ASP.NET_SessionId=sdhf4c54ok0gz5dbvltjzyda; cbManagementSystemLogin=CBE09F37000596B761A92AD29F3614879EB8F6BE4820C8110A598DF95CCAFCF668FC04B6CE936556BB26364236002BE6C2207682ED646A801DF1516E615CBABA7756337C1DE932EAC362DAF4DA0A75D29CA927CF0192E65C35281A13238047FB;",
                  "Referer": "https://sar10686.corebridge.net/DesignModule/DesignAwaitingApproval.aspx",
                  "Referrer-Policy": "strict-origin-when-cross-origin"
            },
            "body": "{\"sEcho\":2,\"iColumns\":21,\"sColumns\":\"\",\"iDisplayStart\":0,\"iDisplayLength\":500,\"iSortCol_0\":6,\"sSortDir_0\":\"asc\",\"viewType\":\"design\",\"queueType\":\"design_awaiting_approval\",\"txSearch\":\"\",\"pageIndex\":1,\"arrQueueFilters\":[null,\"\",null,\"\",\"\",\"\",null,\"\",null,null,\"\",\"\",null,null]}",
            "method": "POST"
      }).then((res) => {
            return res.json();
      }).then((json) => {
            data = json;
            console.log("Success, sending JSON from server");
            console.log(json);
            //resp.status(200).json(json);
            resp.status(200).json(storedData);
            //resp.send(storedCookie);
      });



      
const url = 'https://sar10686.corebridge.net/SalesModule/Orders/OrderProduct.asmx/GetOrderProductQueueEntriesPaged';
const username = 'tristan';
const password = 'tristan10x';

// Function to make a login request and receive a cookie
let storedCookie;
const loginAndGetCookie = async () => {
      try {
            const response = await axios.post('https://sar10686.corebridge.net/DesignModule/DesignMainQueue.aspx', {}, {
                  auth: {
                        username: username,
                        password: password
                  },
                  headers: {
                        "accept": "application/json, text/javascript, */*; q=0.01",
                        "accept-language": "en-US,en;q=0.9",
                        "content-type": "application/json; charset=UTF-8",
                        "priority": "u=1, i",
                        "sec-ch-ua": "\"Chromium\";v=\"130\", \"Google Chrome\";v=\"130\", \"Not?A_Brand\";v=\"99\"",
                        "sec-ch-ua-mobile": "?0",
                        "sec-ch-ua-platform": "\"Windows\"",
                        "sec-fetch-dest": "empty",
                        "sec-fetch-mode": "cors",
                        "sec-fetch-site": "same-origin",
                        "x-requested-with": "XMLHttpRequest"
                  },
                  withCredentials: true // Necessary to receive cookies
            });
            console.log(response);
            // Access the Set-Cookie header from the response
            const setCookieHeader = response.headers['set-cookie'];

            // You can now store the cookie or use it for subsequent requests
            console.log('Cookie received:', setCookieHeader);
            storedCookie = response;
            // For subsequent requests, Axios will automatically send the cookie
            // if withCredentials is set to true and the domain matches
      } catch(error) {
            console.error('Login failed:', error);
      }
};
//loginAndGetCookie();




"scripts": {
    "watch": "webpack --watch",
    "start": "webpack serve --open",
    "server": "node server.js",
    "build": "webpack"
  },


  {
  "dependencies": {
    "body-parser": "^1.20.3",
    "firebase": "^10.7.1",
    "http-proxy-middleware": "^3.0.3",
    "node-fetch": "^3.3.2",
    "parseurl": "^1.3.3",
    "puppeteer": "^23.6.1",
    "url": "^0.11.4",
    "webpack": "^5.95.0",
    "webpack-cli": "^5.1.4",
    "webpack-dev-middleware": "^7.4.2",
    "webpack-dev-server": "^5.1.0"
  },
  "name": "signscheduler",
  "version": "1.0.0",
  "main": "index.js",
  "devDependencies": {
    "axios": "^1.7.7",
    "cors": "^2.8.5",
    "css-loader": "^7.1.2",
    "express": "^4.21.1",
    "html-webpack-plugin": "^5.6.3",
    "nodemon": "^3.1.7",
    "puppeteer": "^23.6.1",
    "style-loader": "^4.0.0",
    "webpack": "^5.95.0",
    "webpack-cli": "^5.1.4",
    "webpack-dev-middleware": "^7.4.2",
    "webpack-dev-server": "^5.1.0"
  },
  "scripts": {
    "watch": "webpack --watch",
    "start": "node server.js",
    "server": "node server.js",
    "build": "webpack"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "description": ""
}
